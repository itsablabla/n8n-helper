# @garza/n8n-helper

**Dead simple n8n workflow creation**

Stop fighting with workflow JSON. Just tell the SDK what you want and get back a webhook URL.

## Installation

```bash
npm install @garza/n8n-helper
```

Or copy `index.js` directly into your project (zero dependencies!).

## Quick Start

```javascript
const N8nHelper = require('@garza/n8n-helper');

const n8n = new N8nHelper({
  baseUrl: 'https://garza-n8n.fly.dev',
  apiKey: 'your-api-key',
  silent: true  // No notifications during setup
});

// Create a webhook in one line
const webhook = await n8n.createWebhook({
  name: 'My Service Hook',
  path: '/my-service'
});

console.log(webhook.webhookUrl);  // https://garza-n8n.fly.dev/my-service
```

## Features

### ✅ Simple Webhooks

```javascript
// Just create and get URL back
const { webhookUrl, workflowId } = await n8n.createWebhook({
  name: 'Voice Memo Processor',
  path: '/voice-memo',
  silent: true,  // Don't notify during setup
  activate: true  // Auto-activate
});

// Use it immediately
fetch(webhookUrl, {
  method: 'POST',
  body: JSON.stringify({ memo: 'test' })
});
```

### ✅ Pre-Built Patterns

Common workflow patterns built-in:

```javascript
// Webhook → Claude AI → Beeper
await n8n.createPattern('webhook-claude-beeper', {
  name: 'AI Assistant',
  chatId: '!abc123:beeper.com'
});

// Webhook → Notify (simple)
await n8n.createPattern('webhook-notify', {
  name: 'Quick Notifier',
  chatId: '!abc123:beeper.com'
});
```

### ✅ Silent Mode

Perfect for automated setup - no spam notifications:

```javascript
const n8n = new N8nHelper({
  baseUrl: 'https://garza-n8n.fly.dev',
  apiKey: 'key',
  silent: true  // Global silent mode
});

// Or per-workflow
await n8n.createWebhook({
  name: 'Test',
  silent: true  // Just this one
});
```

### ✅ Workflow Management

```javascript
// List all workflows
const workflows = await n8n.listWorkflows();

// Get specific workflow
const workflow = await n8n.getWorkflow('workflow-id');

// Activate/deactivate
await n8n.setActive('workflow-id', true);

// Delete
await n8n.deleteWorkflow('workflow-id');
```

## Real-World Examples

### Voice Memo Processing

```javascript
const voiceMemo = await n8n.createWebhook({
  name: 'Voice Memo Processor',
  path: '/voice-memo',
  action: 'claude',  // Auto-adds Claude node
  silent: true
});

// Your app just POSTs to the webhook
await fetch(voiceMemo.webhookUrl, {
  method: 'POST',
  body: JSON.stringify({
    audioUrl: 'https://...',
    userId: 'jaden'
  })
});
```

### Email Monitor

```javascript
const emailHook = await n8n.createPattern('webhook-claude-beeper', {
  name: 'Email Alert System',
  chatId: '!important:beeper.com',
  path: '/email-alert'
});

// Trigger from email service
await n8n.triggerWebhook('/email-alert', {
  from: 'boss@company.com',
  subject: 'Urgent',
  body: 'Need response ASAP'
});
```

### Multi-Service Setup

```javascript
// Set up 5 webhooks in seconds
const services = ['auth', 'payments', 'analytics', 'alerts', 'logs'];

for (const service of services) {
  const webhook = await n8n.createWebhook({
    name: `${service} Service Hook`,
    path: `/${service}`,
    silent: true  // No spam
  });
  
  console.log(`${service}: ${webhook.webhookUrl}`);
}
```

## API Reference

### Constructor

```javascript
new N8nHelper(config)
```

**Config:**
- `baseUrl` - n8n instance URL
- `apiKey` - n8n API key
- `silent` - Default silent mode (bool)

### Methods

#### `createWebhook(options)`

Create a simple webhook workflow.

**Options:**
- `name` - Workflow name (required)
- `path` - Webhook path (auto-generated if omitted)
- `action` - Action to add: 'claude', 'beeper', or custom node
- `silent` - Silent mode for this workflow
- `activate` - Auto-activate (default: true)

**Returns:** `{ workflowId, webhookUrl, status }`

#### `createPattern(patternName, config)`

Create from pre-built pattern.

**Patterns:**
- `webhook-claude-beeper` - Webhook → AI → Message
- `webhook-notify` - Webhook → Simple notification
- `webhook-process-store` - Webhook → Process → Save

**Returns:** `{ workflowId, webhookUrl, status }`

#### `listWorkflows()`

Get all workflows.

**Returns:** Array of workflow objects

#### `getWorkflow(id)`

Get specific workflow.

**Returns:** Workflow object

#### `setActive(id, active)`

Activate/deactivate workflow.

**Returns:** Updated workflow

#### `deleteWorkflow(id)`

Delete workflow.

**Returns:** Success confirmation

#### `triggerWebhook(path, data)`

Trigger a webhook.

**Returns:** Webhook response

## Why This Exists

**Before:**
```javascript
// 100+ lines of workflow JSON
// Complex API calls
// Manual activation
// Error-prone
// Testing spam notifications
```

**After:**
```javascript
const { webhookUrl } = await n8n.createWebhook({
  name: 'My Service',
  silent: true
});
// Done. Use webhookUrl immediately.
```

## Zero Dependencies

This package uses only Node.js built-ins (https, http). No external dependencies = no security vulnerabilities, no bloat.

## License

MIT - Jaden Garza

---

**Stack em up! 🚀**
